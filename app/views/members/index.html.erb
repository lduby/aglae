<script>
function display_member_details() {
  $("#memberslist a").click(function(event) {
    event.preventDefault();
    url=$(this).attr("href");
    $("#memberdetails").load(url+"/jsshow");
  })
}

function new_member_div() {
  $("#newmemberdiv a").click(function(event) {
    event.preventDefault();
  })
}

$(document).ready(function() {
 $("#newmemberdiv").click(
  function () {
    if   ($("#memberform").text() == "") {
      $("#memberform").hide();
      $("#memberform").load("/members/test", function(responseText, statusText, xhr) {
          $("#memberform").slideToggle();
        });
      
    } else {
      $("#memberform").slideToggle('slow', function () {$("#memberform").empty();});
      
    }
   }
  )
  display_member_details();
  new_member_div();
 });
</script>

<h1>Members</h1>
<div id="memberslist">
<div class="row">
<div class="span4">
<ul>
<% if @members.size == 0 %>
No members found
<% end %>
<% @members.each do |member| %>
<li><%= link_to member.lastname.capitalize+" "+member.firstname.capitalize, member %></li>
<% end %>
</ul>
</div>
<div class="span4">

<div id="memberdetails" class="details">
Click a member to view it.
</div>
</div>
<div class="span4">
<div id="newmemberdiv"><a id="newmemberbutton" class="btn" href="<%= new_member_path %>">New Member</a></div>

<div id="memberform" class="form"></div>
</div>

</div>